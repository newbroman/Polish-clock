<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tell the Time in Polish</title>
    <style>
        :root { --bg: #f8f9fa; --card: #ffffff; --text: #212529; --accent: #dc3545; --clock-border: #d1d1d1; --btn-sub: #e9ecef; --help-bg: #fff; --eng-text: #6c757d; --phonetic: #28a745; }
        body.dark-mode { --bg: #121212; --card: #1e1e1e; --text: #e0e0e0; --clock-border: #444; --btn-sub: #333; --help-bg: #1e1e1e; --eng-text: #a0a0a0; --phonetic: #4cd137; }
        body { font-family: -apple-system, sans-serif; background-color: var(--bg); color: var(--text); display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; margin: 0; padding-top: 10px; touch-action: manipulation; }
        .container { background: var(--card); padding: 1.1rem; border-radius: 20px; box-shadow: 0 8px 30px rgba(0,0,0,0.1); width: 310px; text-align: center; position: relative; }
        h1 { font-size: 1.1rem; margin: 0 0 10px 0; color: var(--accent); font-weight: 800; }
        #clock-container { width: 140px; height: 140px; margin: 5px auto 10px; position: relative; border-radius: 50%; border: 6px solid var(--clock-border); background: linear-gradient(to bottom, #ffffff 50%, #dc3545 50%); overflow: hidden; }
        .mark { position: absolute; width: 2px; height: 8px; background: #212529; left: 50%; transform-origin: 50% 70px; }
        .hand { position: absolute; bottom: 50%; left: 50%; transform-origin: bottom; background: #212529; border-radius: 10px; transition: transform 0.4s; }
        .hour-hand { width: 6px; height: 35px; margin-left: -3px; z-index: 2; }
        .min-hand { width: 3px; height: 50px; margin-left: -1.5px; z-index: 1; }
        .dot { width: 10px; height: 10px; background: #212529; position: absolute; top:50%; left:50%; transform: translate(-50%, -50%); border-radius: 50%; z-index: 10; border: 1.5px solid white; }
        #time-input { background: #1a1a1a; color: #00ff00; font-family: monospace; font-size: 1.8rem; padding: 10px; border-radius: 8px; border: 2px solid #333; width: 130px; text-align: center; margin-bottom: 10px; outline: none; }
        .display-area { min-height: 115px; margin: 5px 0; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .polish-display { font-size: 0.95rem; font-weight: 700; color: var(--accent); line-height: 1.2; }
        .phonetic-display { font-size: 0.75rem; color: var(--phonetic); font-family: monospace; margin-top: 2px; font-weight: bold; min-height: 1em; }
        .english-display { font-size: 0.8rem; color: var(--eng-text); font-style: italic; margin-top: 4px; }
        button { cursor: pointer; font-weight: 700; border-radius: 10px; border: none; padding: 10px; width: 100%; margin-bottom: 6px; font-size: 0.85rem; }
        .btn-main { background: var(--accent); color: white; }
        .btn-real { background: #007bff; color: white; }
        .btn-sub { background: var(--btn-sub); color: var(--text); padding: 6px; font-size: 0.65rem; }
        .top-row { display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; margin-bottom: 10px; }
        #help-modal { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--help-bg); border-radius: 20px; z-index: 100; padding: 20px; box-sizing: border-box; overflow-y: auto; text-align: left; font-size: 0.8rem; line-height: 1.4; }
        .help-sect { border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-bottom: 8px; }
        .help-sect h3 { margin: 0 0 5px 0; color: var(--accent); font-size: 0.9rem; }
    </style>
</head>
<body onload="init()">
<div class="container">
    <h1 id="app-title">Tell the Time in Polish</h1>
    <div class="top-row">
        <button class="btn-sub" onclick="toggleDark()">ğŸŒ“</button>
        <button class="btn-sub" onclick="toggleLang()">EN/PL</button>
        <button class="btn-sub" id="quiz-toggle" onclick="toggleQuiz()">Quiz</button>
        <button class="btn-sub" id="ph-toggle" onclick="togglePh()">Phon</button>
        <button class="btn-sub" onclick="toggleHelp()">â“</button>
    </div>

    <div id="clock-container"><div class="dot"></div><div class="hand hour-hand" id="h-hand"></div><div class="hand min-hand" id="m-hand"></div></div>

    <input type="text" id="time-input" maxlength="5" placeholder="12:00" oninput="handleTyping(this)">

    <div class="display-area">
        <div class="polish-display" id="polish-text"></div>
        <div class="phonetic-display" id="phonetic-text"></div>
        <div class="english-display" id="english-text"></div>
        <button id="reveal-btn" style="display:none; background:#28a745; color:white; margin-top:5px;" onclick="revealAnswer()">REVEAL</button>
    </div>

    <div style="display:flex; justify-content: space-around; font-size: 0.8rem; margin-bottom: 10px; padding: 6px; background: rgba(0,0,0,0.05); border-radius: 10px;">
        <label><input type="radio" name="mode" id="casual" checked onchange="updateDisplay()"> Casual</label>
        <label><input type="radio" name="mode" id="formal" onchange="updateDisplay()"> Formal</label>
    </div>

    <button class="btn-real" id="btn-real" onclick="setRealTime()">ACTUAL TIME</button>
    <button class="btn-main" id="btn-random" onclick="rollTime()">RANDOM TIME</button>
    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:6px;">
        <button class="btn-sub" id="btn-listen" onclick="speak(1)">ğŸ”Š LISTEN</button>
        <button class="btn-sub" id="btn-slow" onclick="speak(0.5)">Â½ SPEED</button>
    </div>

    <div id="help-modal">
        <h2 id="help-title" style="color:var(--accent); margin-top:0;">Guide / Poradnik</h2>
        <div id="help-content"></div>
        <button class="btn-main" id="help-close" onclick="toggleHelp()">Close</button>
    </div>
</div>

<script>
    let hours = 12, minutes = 0, isQuiz = false, isRevealed = true, currentLang = 'EN', showPh = true;
    
    const hNom = ["pÃ³Å‚noc", "pierwsza", "druga", "trzecia", "czwarta", "piÄ…ta", "szÃ³sta", "siÃ³dma", "Ã³sma", "dziewiÄ…ta", "dziesiÄ…ta", "jedenasta", "poÅ‚udnie", "trzynasta", "czternasta", "piÄ™tnasta", "szesnasta", "siedemnasta", "osiemnasta", "dziewiÄ™tnasta", "dwudziesta", "dwudziesta pierwsza", "dwudziesta druga", "dwudziesta trzecia"];
    const hNomPh = ["poow-nots", "pyerv-shah", "droo-gah", "tshe-tsyah", "chvar-tah", "pyon-tah", "shoos-tah", "shood-mah", "oos-mah", "je-vyon-tah", "je-shon-tah", "ye-de-nas-tah", "po-wood-nye", "tshi-nas-tah", "chter-nas-tah", "pyent-nas-tah", "shes-nas-tah", "she-dem-nas-tah", "o-shem-nas-tah", "je-vyet-nas-tah", "dvoo-jest-ah", "dvoo-jest-ah pyerv-shah", "dvoo-jest-ah droo-gah", "dvoo-jest-ah tshe-tsyah"];
    const hGen = ["pÃ³Å‚nocy", "pierwszej", "drugiej", "trzeciej", "czwartej", "piÄ…tej", "szÃ³stej", "siÃ³dmej", "Ã³smej", "dziewiÄ…tej", "dziesiÄ…tej", "jedenastej", "poÅ‚udnia", "trzynastej", "czternastej", "piÄ™tnastej", "szesnastej", "siedemnastej", "osiemnastej", "dziewiÄ™tnastej", "dwudziestej", "dwudziestej pierwszej", "dwudziestej drugiej", "dwudziestej trzeciej"];
    const hGenPh = ["poow-no-tsi", "pyerv-shey", "droo-gyey", "tshe-tsiey", "chvar-tey", "pyon-tey", "shoos-tey", "shood-mey", "oos-mey", "je-vyon-tey", "je-shon-tey", "ye-de-nas-tey", "po-wood-nyah", "tshi-nas-tey", "chter-nas-tey", "pyent-nas-tey", "shes-nas-tey", "she-dem-nas-tey", "o-shem-nas-tey", "je-vyet-nas-tey", "dvoo-jes-tey", "dvoo-jes-tey pyerv-shey", "dvoo-jes-tey droo-gyey", "dvoo-jes-tey tshe-tsiey"];
    const mAll = ["zero", "jedna", "dwie", "trzy", "cztery", "piÄ™Ä‡", "szeÅ›Ä‡", "siedem", "osiem", "dziewiÄ™Ä‡", "dziesiÄ™Ä‡", "jedenaÅ›cie", "dwanaÅ›cie", "trzynaÅ›cie", "czternaÅ›cie", "piÄ™tnaÅ›cie", "szesnaÅ›cie", "siedemnaÅ›cie", "osiemnaÅ›cie", "dziewiÄ™tnaÅ›cie", "dwadzieÅ›cia", "dwadzieÅ›cia jeden", "dwadzieÅ›cia dwie", "dwadzieÅ›cia trzy", "dwadzieÅ›cia cztery", "dwadzieÅ›cia piÄ™Ä‡", "dwadzieÅ›cia szeÅ›Ä‡", "dwadzieÅ›cia siedem", "dwadzieÅ›cia osiem", "dwadzieÅ›cia dziewiÄ™Ä‡", "trzydzieÅ›ci", "trzydzieÅ›ci jeden", "trzydzieÅ›ci dwie", "trzydzieÅ›ci trzy", "trzydzieÅ›ci cztery", "trzydzieÅ›ci piÄ™Ä‡", "trzydzieÅ›ci szeÅ›Ä‡", "trzydzieÅ›ci siedem", "trzydzieÅ›ci osiem", "trzydzieÅ›ci dziewiÄ™Ä‡", "czterdzieÅ›ci", "czterdzieÅ›ci jeden", "czterdzieÅ›ci dwie", "czterdzieÅ›ci trzy", "czterdzieÅ›ci cztery", "czterdzieÅ›ci piÄ™Ä‡", "czterdzieÅ›ci szeÅ›Ä‡", "czterdzieÅ›ci siedem", "czterdzieÅ›ci osiem", "czterdzieÅ›ci dziewiÄ™Ä‡", "piÄ™Ä‡dziesiÄ…t", "piÄ™Ä‡dziesiÄ…t jeden", "piÄ™Ä‡dziesiÄ…t dwie", "piÄ™Ä‡dziesiÄ…t trzy", "piÄ™Ä‡dziesiÄ…t cztery", "piÄ™Ä‡dziesiÄ…t piÄ™Ä‡", "piÄ™Ä‡dziesiÄ…t szeÅ›Ä‡", "piÄ™Ä‡dziesiÄ…t siedem", "piÄ™Ä‡dziesiÄ…t osiem", "piÄ™Ä‡dziesiÄ…t dziewiÄ™Ä‡"];
    const mAllPh = ["ze-ro", "yed-nah", "dvye", "tshi", "chter-ih", "pyench", "shesh-ch", "she-dem", "o-shem", "je-vyench", "je-shench", "ye-de-nas-che", "dva-nash-che", "tshi-nash-che", "chter-nash-che", "pyent-nash-che", "shes-nash-che", "she-dem-nash-che", "o-shem-nash-che", "je-vyet-nash-che", "dva-jes-tsyah", "dva-jes-tsyah yed-nah", "dva-jes-tsyah dvye", "dva-jes-tsyah tshi", "dva-jes-tsyah chter-ih", "dva-jes-tsyah pyench", "dva-jes-tsyah shesh-ch", "dva-jes-tsyah she-dem", "dva-jes-tsyah o-shem", "dva-jes-tsyah je-vyench", "tshi-jes-tsyi", "tshi-jes-tsyi yed-nah", "tshi-jes-tsyi dvye", "tshi-jes-tsyi tshi", "tshi-jes-tsyi chter-ih", "tshi-jes-tsyi pyench", "tshi-jes-tsyi shesh-ch", "tshi-jes-tsyi she-dem", "tshi-jes-tsyi o-shem", "tshi-jes-tsyi je-vyench", "chter-jes-tsyi", "chter-jes-tsyi yed-nah", "chter-jes-tsyi dvye", "chter-jes-tsyi tshi", "chter-jes-tsyi chter-ih", "chter-jes-tsyi pyench", "chter-jes-tsyi shesh-ch", "chter-jes-tsyi she-dem", "chter-jes-tsyi o-shem", "chter-jes-tsyi je-vyench", "pyench-je-shont", "pyench-je-shont yed-nah", "pyench-je-shont dvye", "pyench-je-shont tshi", "pyench-je-shont chter-ih", "pyench-je-shont pyench", "pyench-je-shont shesh-ch", "pyench-je-shont she-dem", "pyench-je-shont o-shem", "pyench-je-shont je-vyench"];

    const dict = {
        EN: { title: "Tell the Time in Polish", actual: "ACTUAL TIME", random: "RANDOM TIME", listen: "ğŸ”Š LISTEN", slow: "Â½ SPEED", ask: "How to say?", reveal: "REVEAL", close: "Close Help", qOn: "Quiz: ON", qOff: "Quiz: OFF",
              help: `<div class="help-sect"><h3>ğŸ”¤ Phonetics (Green)</h3><p>Guide for sounds: <strong>tsh</strong> = cz, <strong>sh</strong> = sz, <strong>vpoow</strong> = wpÃ³Å‚.</p></div>
                     <div class="help-sect"><h3>ğŸ‘” Formal (24h)</h3><p>Used for schedules. "Godzina" + Ordinal Number (1st, 2nd). Example: 16:10 = "Godzina szesnasta dziesiÄ™Ä‡".</p></div>
                     <div class="help-sect"><h3>â˜• Casual (12h)</h3><p>Used in conversation. Uses "po" (after), "WpÃ³Å‚ do" (Half to), and "Za" (To).</p></div>
                     <div class="help-sect"><h3>ğŸ® Features</h3><p>Type 4 digits (e.g. 1530) into the green digital clock to jump to that time.</p></div>`
        },
        PL: { title: "Podaj czas po polsku", actual: "AKTUALNY CZAS", random: "LOSOWY CZAS", listen: "ğŸ”Š SÅUCHAJ", slow: "Â½ TEMPO", ask: "Jak to powiedzieÄ‡?", reveal: "POKAÅ»", close: "Zamknij", qOn: "Quiz: WÅ", qOff: "Quiz: WYÅ",
              help: `<div class="help-sect"><h3>ğŸ”¤ Fonetyka (Zielony)</h3><p>Przewodnik: <strong>tsh</strong> = cz, <strong>sh</strong> = sz, <strong>vpoow</strong> = wpÃ³Å‚.</p></div>
                     <div class="help-sect"><h3>ğŸ‘” Oficjalny (24h)</h3><p>UÅ¼ywany w rozkÅ‚adach. "Godzina" + liczebnik porzÄ…dkowy. PrzykÅ‚ad: 16:10 = "Godzina szesnasta dziesiÄ™Ä‡".</p></div>
                     <div class="help-sect"><h3>â˜• Potoczny (12h)</h3><p>UÅ¼ywany w rozmowie. UÅ¼ywa "po", "WpÃ³Å‚ do" oraz "Za".</p></div>
                     <div class="help-sect"><h3>ğŸ® Funkcje</h3><p>Wpisz 4 cyfry (np. 1530) w zielony zegar cyfrowy, aby ustawiÄ‡ czas.</p></div>`
        }
    };

    function init() { 
        const c = document.getElementById('clock-container');
        for (let i = 0; i < 12; i++) {
            const m = document.createElement('div'); m.className = 'mark';
            m.style.transform = `rotate(${i * 30}deg)`; c.appendChild(m);
        }
        setRealTime(); 
    }

    function handleTyping(el) {
        let v = el.value.replace(/\D/g, '');
        if (v.length > 2) v = v.slice(0, 2) + ':' + v.slice(2, 4);
        el.value = v;
        if (v.length === 5) {
            const p = v.split(':');
            let h = parseInt(p[0]), m = parseInt(p[1]);
            if (h < 24 && m < 60) { hours = h; minutes = m; isRevealed = !isQuiz; updateDisplay(true); }
        }
    }

    function setRealTime() { const n = new Date(); hours = n.getHours(); minutes = n.getMinutes(); isRevealed = !isQuiz; updateDisplay(); }
    function rollTime() { hours = Math.floor(Math.random() * 24); minutes = Math.floor(Math.random() * 60); isRevealed = !isQuiz; updateDisplay(); }
    function revealAnswer() { isRevealed = true; updateDisplay(); speak(1); }
    function toggleQuiz() { isQuiz = !isQuiz; isRevealed = !isQuiz; updateDisplay(); }
    function toggleHelp() { const m = document.getElementById('help-modal'); m.style.display = m.style.display === 'block' ? 'none' : 'block'; }
    function toggleDark() { document.body.classList.toggle('dark-mode'); }
    function toggleLang() { currentLang = (currentLang === 'EN' ? 'PL' : 'EN'); updateDisplay(); }
    function togglePh() { showPh = !showPh; document.getElementById('ph-toggle').style.background = showPh ? '' : 'rgba(0,0,0,0.3)'; updateDisplay(); }

    function updateDisplay(skipInput = false) {
        document.getElementById('h-hand').style.transform = `rotate(${(hours % 12) * 30 + minutes * 0.5}deg)`;
        document.getElementById('m-hand').style.transform = `rotate(${minutes * 6}deg)`;
        if (!skipInput) document.getElementById('time-input').value = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;

        const formal = document.getElementById('formal').checked;
        let p = "", ph = "", e = "";

        if (formal) {
            p = `Godzina ${hNom[hours]} ${minutes === 0 ? "zero zero" : (minutes < 10 ? "zero " + mAll[minutes] : mAll[minutes])}`;
            ph = `go-jee-nah ${hNomPh[hours]} ${minutes === 0 ? "ze-ro ze-ro" : (minutes < 10 ? "ze-ro " + mAllPh[minutes] : mAllPh[minutes])}`;
            e = `${hours}:${minutes.toString().padStart(2, '0')}`;
        } else {
            let h12 = hours % 12, n12 = (hours + 1) % 12;
            if (minutes === 0) {
                p = hours===0?"PÃ³Å‚noc":hours===12?"PoÅ‚udnie":hNom[h12];
                ph = hours===0?"poow-nots":hours===12?"po-wood-nye":hNomPh[h12];
                e = hours===0?"Midnight":hours===12?"Noon":`${h12||12} o'clock`;
            } else if (minutes < 30) {
                p = `${mAll[minutes]} po ${hGen[h12]}`; ph = `${mAllPh[minutes]} po ${hGenPh[h12]}`; e = `${minutes} past ${h12 || 12}`;
            } else if (minutes === 30) {
                p = `WpÃ³Å‚ do ${hGen[n12]}`; ph = `vpoow doh ${hGenPh[n12]}`; e = `Half past ${h12 || 12}`;
            } else {
                let d = 60 - minutes; p = `Za ${mAll[d]} ${hNom[n12]}`; ph = `zah ${mAllPh[d]} ${hNomPh[n12]}`; e = `${d} to ${n12 || 12}`;
            }
        }

        const d = dict[currentLang];
        document.getElementById('app-title').innerText = d.title;
        document.getElementById('btn-real').innerText = d.actual;
        document.getElementById('btn-random').innerText = d.random;
        document.getElementById('btn-listen').innerText = d.listen;
        document.getElementById('btn-slow').innerText = d.slow;
        document.getElementById('reveal-btn').innerText = d.reveal;
        document.getElementById('help-close').innerText = d.close;
        document.getElementById('quiz-toggle').innerText = isQuiz ? d.qOn : d.qOff;
        document.getElementById('help-content').innerHTML = d.help;

        const pt = document.getElementById('polish-text'), pht = document.getElementById('phonetic-text'), et = document.getElementById('english-text');
        const rb = document.getElementById('reveal-btn');
        
        if (isQuiz && !isRevealed) { pt.innerText = d.ask; pht.innerText = ""; et.innerText = ""; rb.style.display = "block"; }
        else { pt.innerText = p; pht.innerText = showPh ? ph : ""; et.innerText = e; rb.style.display = "none"; }
    }

    function speak(r) { 
        window.speechSynthesis.cancel(); 
        const t = document.getElementById('polish-text').innerText;
        if (t === dict.EN.ask || t === dict.PL.ask) return;
        const m = new SpeechSynthesisUtterance(t); m.lang = 'pl-PL'; m.rate = r; 
        window.speechSynthesis.speak(m); 
    }
</script>
</body>
</html>
