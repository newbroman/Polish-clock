<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Learn to Tell the Time in Polish</title>
    <style>
        :root { --bg: #f8f9fa; --card: #ffffff; --text: #212529; --accent: #dc3545; --clock-bg: #ffffff; --btn-sub: #e9ecef; --help-bg: #fff; --eng-text: #6c757d; }
        body.dark-mode { --bg: #121212; --card: #1e1e1e; --text: #e0e0e0; --clock-bg: #2d2d2d; --btn-sub: #333; --help-bg: #1e1e1e; --eng-text: #a0a0a0; }
        
        body { font-family: -apple-system, system-ui, sans-serif; background-color: var(--bg); color: var(--text); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; touch-action: manipulation; }
        .container { background: var(--card); padding: 1.2rem; border-radius: 24px; box-shadow: 0 12px 40px rgba(0,0,0,0.12); width: 315px; text-align: center; position: relative; }
        
        .main-title { font-size: 1.1rem; font-weight: 800; color: var(--text); margin-bottom: 15px; letter-spacing: -0.5px; }

        .digital-box { background: #1a1a1a; color: #00ff00; font-family: monospace; font-size: 1.5rem; padding: 10px; border-radius: 10px; display: inline-flex; align-items: center; margin-bottom: 12px; border: 2px solid #333; position: relative; }
        #time-picker { position: absolute; opacity: 0; width: 100%; height: 100%; left: 0; top: 0; cursor: pointer; }
        .ampm-label { font-size: 0.8rem; color: #888; margin-left: 5px; }

        #clock-container { width: 110px; height: 110px; background: var(--clock-bg); border: 5px solid var(--accent); border-radius: 50%; margin: 10px auto; position: relative; }
        .hand { position: absolute; bottom: 50%; left: 50%; transform-origin: bottom; background: var(--text); border-radius: 10px; transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .hour-hand { width: 4px; height: 28px; margin-left: -2px; z-index: 2; }
        .min-hand { width: 3px; height: 42px; margin-left: -1.5px; z-index: 1; }
        .dot { width: 8px; height: 8px; background: var(--accent); position: absolute; top:50%; left:50%; transform: translate(-50%, -50%); border-radius: 50%; z-index: 10; }

        .display-area { min-height: 100px; margin: 10px 0; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 0 10px; }
        .polish-display { font-size: 1.1rem; font-weight: 700; color: var(--accent); line-height: 1.2; }
        .english-display { font-size: 0.9rem; color: var(--eng-text); font-style: italic; margin-top: 5px; }
        
        button { cursor: pointer; font-weight: 700; border-radius: 12px; border: none; padding: 12px; transition: 0.1s; width: 100%; margin-bottom: 8px; }
        button:active { transform: scale(0.96); }
        .btn-main { background: var(--accent); color: white; }
        .btn-real { background: #007bff; color: white; }
        .btn-sub { background: var(--btn-sub); color: var(--text); font-size: 0.75rem; padding: 8px; }
        
        #help-modal { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--help-bg); border-radius: 24px; z-index: 100; padding: 20px; box-sizing: border-box; overflow-y: auto; text-align: left; }
        .help-section { margin-bottom: 15px; border-left: 3px solid var(--accent); padding-left: 10px; }
        .help-section h3 { font-size: 0.9rem; margin: 0 0 5px 0; color: var(--accent); text-transform: uppercase; }
        .example { color: #666; font-style: italic; display: block; margin-top: 2px; font-size: 0.75rem; }
        
        table { width: 100%; border-collapse: collapse; font-size: 0.75rem; margin-top: 5px; }
        th { text-align: left; background: var(--btn-sub); padding: 4px; }
        td { border-bottom: 1px solid #eee; padding: 4px; }

        .top-row { display: flex; gap: 5px; margin-bottom: 10px; }
        .setting-row { display: flex; justify-content: space-around; align-items: center; font-size: 0.85rem; margin-bottom: 12px; padding: 8px; background: rgba(0,0,0,0.05); border-radius: 12px; }
    </style>
</head>
<body onload="init()">

<div class="container">
    <div class="main-title">Learn to Tell the Time in Polish</div>

    <div id="help-modal">
        <h2 style="font-size: 1.15rem; margin-top:0; color: var(--accent);">Learn to Tell the Time in Polish</h2>
        
        <div class="help-section">
            <h3>How to Use</h3>
            <p style="font-size: 0.78rem;">
                ‚Ä¢ Tap green numbers to set a time.<br>
                ‚Ä¢ Use <b>Quiz</b> to hide the answer.<br>
                ‚Ä¢ Switch <b>Casual/Formal</b> for different styles.
            </p>
        </div>

        <div class="help-section">
            <h3>The 3 Main Rules</h3>
            <p style="font-size: 0.78rem;">
                <b>1. Minutes 1-29:</b> Use <i>po</i> (after) + Genitive.<br>
                <span class="example">5:10 ‚Üí Dziesiƒôƒá po piƒÖtej</span>
                <b>2. Half Hour:</b> Use <i>Wp√≥≈Ç do</i> + Genitive Next Hour.<br>
                <span class="example">5:30 ‚Üí Wp√≥≈Ç do sz√≥stej</span>
                <b>3. Minutes 31-59:</b> Use <i>Za</i> (before) + Nominative Next.<br>
                <span class="example">5:45 ‚Üí Za piƒôtna≈õcie sz√≥sta</span>
            </p>
        </div>

        <div class="help-section">
            <h3>Grammar Table: Hours</h3>
            <table>
                <tr><th>#</th><th>Nominative (Za...)</th><th>Genitive (Po...)</th></tr>
                <tr><td>1</td><td>Pierwsza</td><td>Pierwszej</td></tr>
                <tr><td>2</td><td>Druga</td><td>Drugiej</td></tr>
                <tr><td>3</td><td>Trzecia</td><td>Trzeciej</td></tr>
                <tr><td>4</td><td>Czwarta</td><td>Czwartej</td></tr>
                <tr><td>5</td><td>PiƒÖta</td><td>PiƒÖtej</td></tr>
                <tr><td>6</td><td>Sz√≥sta</td><td>Sz√≥stej</td></tr>
                <tr><td>7</td><td>Si√≥dma</td><td>Si√≥dmej</td></tr>
                <tr><td>8</td><td>√ìsma</td><td>√ìsmej</td></tr>
                <tr><td>9</td><td>DziewiƒÖta</td><td>DziewiƒÖtej</td></tr>
                <tr><td>10</td><td>DziesiƒÖta</td><td>DziesiƒÖtej</td></tr>
                <tr><td>11</td><td>Jedenasta</td><td>Jedenastej</td></tr>
                <tr><td>12</td><td>Dwunasta</td><td>Dwunastej</td></tr>
            </table>
        </div>

        <button class="btn-main" onclick="toggleHelp()">Close</button>
    </div>

    <div class="top-row">
        <button class="btn-sub" onclick="toggleDark()">üåì Theme</button>
        <button class="btn-sub" id="lang-btn" onclick="toggleLang()">EN / PL</button>
        <button class="btn-sub" id="quiz-toggle" onclick="toggleQuiz()">Quiz: OFF</button>
        <button class="btn-sub" onclick="toggleHelp()">‚ùì</button>
    </div>

    <div class="digital-box">
        <input type="time" id="time-picker" oninput="manualTime(this.value)">
        <span id="digi-time">12:00</span><span class="ampm-label" id="ampm">PM</span>
    </div>

    <div id="clock-container">
        <div class="dot"></div>
        <div class="hand hour-hand" id="h-hand"></div>
        <div class="hand min-hand" id="m-hand"></div>
    </div>

    <div class="display-area">
        <div class="polish-display" id="polish-text">Dzie≈Ñ dobry!</div>
        <div class="english-display" id="english-text">Good morning!</div>
    </div>
    
    <button id="reveal-btn" style="display:none; background:#28a745; color:white;" onclick="revealAnswer()">REVEAL ANSWER</button>

    <div class="setting-row">
        <div>
            <input type="radio" name="mode" id="casual" checked onchange="handleModeChange()"> Casual
            <input type="radio" name="mode" id="formal" onchange="handleModeChange()"> Formal
        </div>
        <button class="btn-sub" id="format-toggle" style="width:60px; margin:0;" onclick="toggleFormat()">12H</button>
    </div>

    <button class="btn-real" id="btn-real" onclick="setRealTime()">ACTUAL TIME</button>
    <button class="btn-main" id="btn-random" onclick="rollTime()">RANDOM TIME</button>
    
    <div style="display:flex; gap:5px;">
        <button class="btn-sub" onclick="speak(1)">üîä REPEAT</button>
        <button class="btn-sub" onclick="speak(0.5)">¬Ω SPEED</button>
    </div>
</div>

<script>
    let hours = 12, minutes = 0, isQuiz = false, isRevealed = true, is24h = false;
    
    const hNom = ["p√≥≈Çnoc", "pierwsza", "druga", "trzecia", "czwarta", "piƒÖta", "sz√≥sta", "si√≥dma", "√≥sma", "dziewiƒÖta", "dziesiƒÖta", "jedenasta", "po≈Çudnie", "trzynasta", "czternasta", "piƒôtnasta", "szesnasta", "siedemnasta", "osiemnasta", "dziewiƒôtnasta", "dwudziesta", "dwudziesta pierwsza", "dwudziesta druga", "dwudziesta trzecia"];
    const hGen = ["p√≥≈Çnocy", "pierwszej", "drugiej", "trzeciej", "czwartej", "piƒÖtej", "sz√≥stej", "si√≥dmej", "√≥smej", "dziewiƒÖtej", "dziesiƒÖtej", "jedenastej", "po≈Çudnia", "trzynastej", "czternastej", "piƒôtnastej", "szesnasta", "siedemnastej", "osiemnastej", "dziewiƒôtnastej", "dwudziestej", "dwudziestej pierwszej", "dwudziestej drugiej", "dwudziestej trzeciej"];
    const mWords = ["", "jedna", "dwie", "trzy", "cztery", "piƒôƒá", "sze≈õƒá", "siedem", "osiem", "dziewiƒôƒá", "dziesiƒôƒá", "jedena≈õcie", "dwana≈õcie", "trzyna≈õcie", "czterna≈õcie", "piƒôtna≈õcie", "szesna≈õcie", "siedemna≈õcie", "osiemna≈õcie", "dziewiƒôtna≈õcie", "dwadzie≈õcia", "dwadzie≈õcia jeden", "dwadzie≈õcia dwie", "dwadzie≈õcia trzy", "dwadzie≈õcia cztery", "dwadzie≈õcia piƒôƒá", "dwadzie≈õcia sze≈õƒá", "dwadzie≈õcia siedem", "dwadzie≈õcia osiem", "dwadzie≈õcia dziewiƒôƒá", "trzydzie≈õci", "trzydzie≈õci jeden", "trzydzie≈õci dwie", "trzydzie≈õci trzy", "trzydzie≈õci cztery", "trzydzie≈õci piƒôƒá", "trzydzie≈õci sze≈õƒá", "trzydzie≈õci siedem", "trzydzie≈õci osiem", "trzydzie≈õci dziewiƒôƒá", "czterdzie≈õci", "czterdzie≈õci jeden", "czterdzie≈õci dwie", "czterdzie≈õci trzy", "czterdzie≈õci cztery", "czterdzie≈õci piƒôƒá", "czterdzie≈õci sze≈õƒá", "czterdzie≈õci siedem", "czterdzie≈õci osiem", "czterdzie≈õci dziewiƒôƒá", "piƒôƒádziesiƒÖt", "piƒôƒádziesiƒÖt jeden", "piƒôƒádziesiƒÖt dwie", "piƒôƒádziesiƒÖt trzy", "piƒôƒádziesiƒÖt cztery", "piƒôƒádziesiƒÖt piƒôƒá", "piƒôƒádziesiƒÖt sze≈õƒá", "piƒôƒádziesiƒÖt siedem", "piƒôƒádziesiƒÖt osiem", "piƒôƒádziesiƒÖt dziewiƒôƒá"];

    function init() { setRealTime(); }

    function toggleLang() {
        const btn = document.getElementById('lang-btn');
        btn.innerText = btn.innerText === 'EN / PL' ? 'PL / EN' : 'EN / PL';
    }

    function manualTime(val) {
        if (!val) return;
        const pts = val.split(':'); hours = parseInt(pts[0]); minutes = parseInt(pts[1]);
        isRevealed = !isQuiz; updateDisplay(); if(!isQuiz) speak(1);
    }

    function handleModeChange() { updateDisplay(); }
    function toggleFormat() { is24h = !is24h; document.getElementById('format-toggle').innerText = is24h ? "24H" : "12H"; updateDisplay(); }
    function setRealTime() { const n = new Date(); hours = n.getHours(); minutes = n.getMinutes(); isRevealed = !isQuiz; updateDisplay(); }
    function rollTime() { hours = Math.floor(Math.random() * 24); minutes = Math.floor(Math.random() * 60); isRevealed = !isQuiz; updateDisplay(); if(!isQuiz) speak(1); }
    function toggleQuiz() { isQuiz = !isQuiz; isRevealed = !isQuiz; document.getElementById('quiz-toggle').innerText = isQuiz ? "Quiz: ON" : "Quiz: OFF"; updateDisplay(); }
    function revealAnswer() { isRevealed = true; updateDisplay(); speak(1); }

    function updateDisplay() {
        document.getElementById('h-hand').style.transform = `rotate(${(hours % 12) * 30 + minutes * 0.5}deg)`;
        document.getElementById('m-hand').style.transform = `rotate(${minutes * 6}deg)`;
        document.getElementById('digi-time').innerText = `${hours % 12 || 12}:${minutes.toString().padStart(2, '0')}`;
        document.getElementById('ampm').innerText = hours >= 12 ? "PM" : "AM";

        const formal = document.getElementById('formal').checked;
        let polish = "", english = "";
        let hIdx = formal ? hours : (is24h ? hours : hours % 12);
        let nextH = (hours + 1) % (is24h ? 24 : 12);

        if (formal) {
            polish = `Godzina ${hNom[hours]} ${mWords[minutes]}`;
            english = `It's ${hours}:${minutes.toString().padStart(2, '0')} (Formal)`;
        } else {
            if (minutes === 0) { polish = `Jest ${hNom[hIdx]}`; english = `It's ${hIdx === 0 ? 'midnight' : hIdx + " o'clock"}`; }
            else if (minutes < 30) { polish = `${mWords[minutes]} po ${hGen[hIdx]}`; english = `${minutes} past ${hIdx % 12 || 12}`; }
            else if (minutes === 30) { polish = `Wp√≥≈Ç do ${hGen[nextH]}`; english = `Half to ${nextH % 12 || 12}`; }
            else { polish = `Za ${mWords[60 - minutes]} ${hNom[nextH]}`; english = `${60-minutes} to ${nextH % 12 || 12}`; }
        }

        const pTxt = document.getElementById('polish-text');
        const eTxt = document.getElementById('english-text');
        if (isQuiz && !isRevealed) {
            pTxt.innerText = "Jak to powiedzieƒá?"; eTxt.innerText = "";
            document.getElementById('reveal-btn').style.display = "block";
        } else {
            pTxt.innerText = polish.charAt(0).toUpperCase() + polish.slice(1);
            eTxt.innerText = english;
            document.getElementById('reveal-btn').style.display = "none";
        }
    }

    function speak(r) {
        window.speechSynthesis.cancel();
        const t = document.getElementById('polish-text').innerText;
        if (t.includes("?") || t.length < 2) return;
        const m = new SpeechSynthesisUtterance(t); m.lang = 'pl-PL'; m.rate = r;
        window.speechSynthesis.speak(m);
    }

    function toggleHelp() { const m = document.getElementById('help-modal'); m.style.display = m.style.display === 'block' ? 'none' : 'block'; }
    function toggleDark() { document.body.classList.toggle('dark-mode'); }
</script>
</body>
</html>
