<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Polish Time Master</title>
    
    <style>
        :root { --bg: #f8f9fa; --card: #ffffff; --text: #212529; --accent: #dc3545; --clock-bg: #ffffff; }
        body.dark-mode { --bg: #121212; --card: #1e1e1e; --text: #e0e0e0; --clock-bg: #2d2d2d; }
        
        body { 
            font-family: -apple-system, system-ui, sans-serif; 
            background-color: var(--bg); color: var(--text); 
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; margin: 0; overflow: hidden; touch-action: manipulation;
        }

        .container { background: var(--card); padding: 1.2rem; border-radius: 24px; box-shadow: 0 12px 40px rgba(0,0,0,0.12); width: 320px; text-align: center; }
        h1 { font-size: 1.1rem; margin: 0 0 10px 0; color: var(--accent); }

        .digital-box { 
            background: #1a1a1a; color: #00ff00; font-family: 'Courier New', monospace; 
            font-size: 1.4rem; padding: 8px 16px; border-radius: 10px; display: inline-block; 
            margin-bottom: 12px; border: 2px solid #333; box-shadow: inset 0 0 10px rgba(0,255,0,0.2);
        }
        .ampm-label { font-size: 0.7rem; margin-left: 4px; color: #888; }

        #clock-container { 
            width: 120px; height: 120px; background: var(--clock-bg); border: 5px solid var(--accent); 
            border-radius: 50%; margin: 10px auto; position: relative; display: flex; align-items: center; justify-content: center;
        }
        .hand { position: absolute; bottom: 50%; left: 50%; transform-origin: bottom; background: var(--text); border-radius: 10px; z-index: 5; transition: transform 0.5s cubic-bezier(0.4, 2.08, 0.55, 0.44); }
        .hour-hand { width: 4px; height: 30px; margin-left: -2px; }
        .min-hand { width: 3px; height: 45px; margin-left: -1.5px; }
        .dot { width: 8px; height: 8px; background: var(--accent); position: absolute; border-radius: 50%; z-index: 10; }

        .polish-display { min-height: 65px; margin: 12px 0; font-size: 1.1rem; font-weight: 700; color: var(--accent); display: flex; align-items: center; justify-content: center; line-height: 1.3; padding: 0 10px; }
        .placeholder { color: #888; font-style: italic; font-weight: 400; font-size: 0.85rem; }

        button { cursor: pointer; font-weight: 700; border-radius: 12px; border: none; transition: 0.1s; -webkit-tap-highlight-color: transparent; }
        button:active { transform: scale(0.96); }

        .btn-main { background: var(--accent); color: white; width: 100%; padding: 12px; font-size: 1rem; margin-bottom: 8px; }
        .btn-real { background: #007bff; color: white; width: 100%; padding: 10px; font-size: 0.9rem; margin-bottom: 12px; }
        
        .btn-group { display: flex; gap: 8px; }
        .btn-sub { background: #e9ecef; color: #495057; padding: 10px; flex: 1; font-size: 0.75rem; }
        
        #reveal-btn { background: #28a745; color: white; width: 100%; padding: 12px; font-size: 1rem; margin-bottom: 12px; display: none; }

        .top-row { display: flex; justify-content: space-between; margin-bottom: 15px; gap: 6px; }
        .mode-area { font-size: 0.85rem; margin-bottom: 12px; font-weight: 600; }
    </style>
</head>
<body onload="initVoices()">

<div class="container">
    <div class="top-row">
        <button class="btn-sub" onclick="toggleDark()"></button>
        <button class="btn-sub" id="quiz-toggle" onclick="toggleQuiz()">QUIZ: OFF</button>
        <button class="btn-sub" id="lang-toggle" onclick="toggleLang()">EN / PL</button>
    </div>

    <h1 id="ui-title">Polish Time Master</h1>

    <div class="digital-box">
        <span id="digi-time">--:--</span><span class="ampm-label" id="ampm">--</span>
    </div>

    <div id="clock-container">
        <div class="dot"></div>
        <div class="hand hour-hand" id="h-hand"></div>
        <div class="hand min-hand" id="m-hand"></div>
    </div>

    <div class="polish-display" id="polish-text">
        <span id="ui-welcome" class="placeholder">Select a time mode</span>
    </div>

    <button id="reveal-btn" onclick="revealAnswer()">REVEAL ANSWER</button>

    <div class="mode-area">
        <input type="radio" name="mode" id="casual" checked onchange="updateDisplay()"> <label for="casual" id="ui-casual">Casual</label>
        &nbsp;
        <input type="radio" name="mode" id="formal" onchange="updateDisplay()"> <label for="formal" id="ui-formal">Formal</label>
    </div>

    <button class="btn-real" id="ui-real" onclick="setRealTime()">REAL TIME</button>
    <button class="btn-main" id="ui-random" onclick="rollTime()">RANDOM TIME</button>
    
    <div class="btn-group">
        <button class="btn-sub" id="ui-repeat" onclick="speak(1)"> REPEAT</button>
        <button class="btn-sub" id="ui-slow" onclick="speak(0.55)">陆 SPEED</button>
    </div>
</div>

<script>
    let hours = 12, minutes = 0, isQuiz = false, isRevealed = true, polVoice = null, currentLang = 'EN';

    const hNom = ["p贸noc", "pierwsza", "druga", "trzecia", "czwarta", "pita", "sz贸sta", "si贸dma", "贸sma", "dziewita", "dziesita", "jedenasta", "poudnie", "trzynasta", "czternasta", "pitnasta", "szesnasta", "siedemnasta", "osiemnasta", "dziewitnasta", "dwudziesta", "dwudziesta pierwsza", "dwudziesta druga", "dwudziesta trzecia"];
    const hGen = ["p贸nocy", "pierwszej", "drugiej", "trzeciej", "czwartej", "pitej", "sz贸stej", "si贸dmej", "贸smej", "dziewitej", "dziesitej", "jedenastej", "poudnia", "trzynastej", "czternastej", "pitnastej", "szesnasta", "sied
